{"remainingRequest":"C:\\xampp\\htdocs\\newcrud\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\newcrud\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xampp\\htdocs\\newcrud\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\newcrud\\src\\components\\EditVisitor.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\newcrud\\src\\components\\EditVisitor.vue","mtime":1574722047662},{"path":"C:\\xampp\\htdocs\\newcrud\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\newcrud\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\newcrud\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\newcrud\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRWRpdFZpc2l0b3InLAogIHByb3BzOiB7CiAgICBkaXNwbGF5RWRpdE9wdGlvbjogQm9vbGVhbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkVmlzaXRvcjoge30sCiAgICAgIHNlbGVjdGVkRmlsZTogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uRmlsZVNlbGVjdGVkOiBmdW5jdGlvbiBvbkZpbGVTZWxlY3RlZChldmVudCkgewogICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgIH0sCiAgICBzZWxlY3RlZFRvQ2hhbmdlOiBmdW5jdGlvbiBzZWxlY3RlZFRvQ2hhbmdlKHZpc2l0b3IpIHsKICAgICAgdGhpcy5zZWxlY3RlZFZpc2l0b3IgPSB2aXNpdG9yOwogICAgfSwKICAgIHRvRm9ybURhdGE6IGZ1bmN0aW9uIHRvRm9ybURhdGEob2JqKSB7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwoKICAgICAgZm9yICh2YXIgaSBpbiBvYmopIHsKICAgICAgICBmb3JtRGF0YS5BcHBlbmQoaSwgb2JqW2ldKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZvcm1EYXRhOwogICAgfSwKICAgIHVwZGF0ZVZpc2l0b3I6IGZ1bmN0aW9uIHVwZGF0ZVZpc2l0b3IoKSB7CiAgICAgIHZhciBmb3JtRGF0YSA9IHRoaXMudG9Gb3JtRGF0YSh0aGlzLnNlbGVjdGVkVmlzaXRvcik7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnaW1hZ2UnLCB0aGlzLnNlbGVjdGVkRmlsZSwgdGhpcy5zZWxlY3RlZEZpbGUubmFtZSk7CiAgICAgIGF4aW9zLnBvc3QoIi91cGRhdGVWaXNpdG9yLnBocD9hY3Rpb249dXBkYXRlIiwgZm9ybURhdGEsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHRoaXMuc2VsZWN0ZWRWaXNpdG9yID0ge307CgogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmVycm9yKSB7CiAgICAgICAgICB0aGlzLmVycm9yTXNnID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnN1Y2Nlc3NNc2cgPSByZXNwb25zZS5kYXRhLnZpc2l0b3JzOwogICAgICAgICAgdGhpcy5nZXRBbGxWaXNpdG9ycygpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["EditVisitor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,iBAAA,EAAA;AADA,GAFA;AAKA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,eAAA,EAAA,EADA;AAEA,MAAA,YAAA,EAAA;AAFA,KAAA;AAIA,GAVA;AAWA,EAAA,OAAA,EAAA;AAEA,IAAA,cAFA,0BAEA,KAFA,EAEA;AACA,WAAA,YAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,KAJA;AAKA,IAAA,gBALA,4BAKA,OALA,EAKA;AACA,WAAA,eAAA,GAAA,OAAA;AACA,KAPA;AASA,IAAA,UATA,sBASA,GATA,EASA;AACA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;;AACA,WAAA,IAAA,CAAA,IAAA,GAAA,EAAA;AACA,QAAA,QAAA,CAAA,MAAA,CAAA,CAAA,EAAA,GAAA,CAAA,CAAA,CAAA;AACA;;AACA,aAAA,QAAA;AACA,KAfA;AAiBA,IAAA,aAjBA,2BAiBA;AACA,UAAA,QAAA,GAAA,KAAA,UAAA,CAAA,KAAA,eAAA,CAAA;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,OAAA,EAAA,KAAA,YAAA,EAAA,KAAA,YAAA,CAAA,IAAA;AACA,MAAA,KAAA,CAAA,IAAA,CAAA,kCAAA,EAAA,QAAA,EAAA;AAAA,QAAA,OAAA,EAAA;AAAA,0BAAA;AAAA;AAAA,OAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,aAAA,eAAA,GAAA,EAAA;;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,KAAA,EAAA;AACA,eAAA,QAAA,GAAA,QAAA,CAAA,IAAA,CAAA,OAAA;AACA,SAFA,MAGA;AACA,eAAA,UAAA,GAAA,QAAA,CAAA,IAAA,CAAA,QAAA;AACA,eAAA,cAAA;AACA;AACA,OATA;AAUA;AA9BA;AAXA,CAAA","sourcesContent":["<template>\r\n    <!-- Update a Visitor profile -->\r\n    <div id=\"overlay\" v-if=\"displayEditOption\">\r\n    \r\n        <div class=\"modal-dialog\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h4 class=\"modal-title\">Change Visitor Info</h4>\r\n                    <button type=\"button\" class=\"close\" @click=\"displayEditOption = !displayEditOption\">X</button>\r\n                </div>\r\n                <div class=\"modal-body p-4\">\r\n                    <form action=\"#\" method=\"post\" enctype=\"multipart/form-data\">\r\n                        <div class=\"form-group\">\r\n                            <input type=\"text\" name=\"name\" class=\"form-control form-control-lg\" v-model=\"selectedVisitor.name\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <input type=\"text\" name=\"surname\" class=\"form-control form-control-lg\" v-model=\"selectedVisitor.surname\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <input type=\"text\" name=\"phone\" class=\"form-control form-control-lg\" v-model=\"selectedVisitor.phone\">\r\n                        </div>\r\n                        <div class=\"form-group\">\r\n                            <input type=\"text\" name=\"email\" class=\"form-control form-control-lg\" v-model=\"selectedVisitor.email\">    \r\n                        </div>\r\n                        <hr>\r\n                        <div class=\"form-group\">\r\n                            <label>Select Image</label>\r\n                            <input type=\"file\" name=\"image\" @change=\"onFileSelected\">\r\n                        </div>\r\n                        <hr>\r\n                        <div class=\"form-group\">\r\n                                <button type=\"submit\" value=\"submit\" name=\"update\" class=\"btn btn-warning btn-block btn-lg\" @click=\"displayEditOption= !displayEditOption, updateVisitor();\">EDIT</button>\r\n                        </div>\r\n                    </form>   \r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n    name:'EditVisitor',\r\n    props:{\r\n        displayEditOption: Boolean,\r\n    },\r\n    data:function(){\r\n        return{\r\n            selectedVisitor:{} ,\r\n            selectedFile: null ,  \r\n        }\r\n    },\r\n    methods:{\r\n        \r\n      onFileSelected(event){\r\n      this.selectedFile = event.target.files[0];\r\n      },\r\n      selectedToChange(visitor){\r\n      this.selectedVisitor = visitor;\r\n      },\r\n\r\n      toFormData(obj){\r\n            var formData = new FormData();\r\n            for(var i in obj){\r\n                formData.Append(i,obj[i])\r\n            }\r\n            return formData;\r\n        },  \r\n\r\n      updateVisitor(){\r\n      var formData = this.toFormData(this.selectedVisitor);\r\n      formData.append('image',this.selectedFile,this.selectedFile.name)\r\n      axios.post(\"/updateVisitor.php?action=update\",formData,{headers:{'Content-Type':'multipart/form-data'}}).then(function(response){\r\n        this.selectedVisitor = {};\r\n        if(response.data.error){\r\n            this.errorMsg = response.data.message;\r\n        }\r\n        else{\r\n            this.successMsg = response.data.visitors;\r\n            this.getAllVisitors();\r\n        }   \r\n      });\r\n    },\r\n\r\n\r\n    }\r\n \r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    #overlay {\r\n        position: fixed;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: rgba(0,0,0,0.6);\r\n    }\r\n</style>"],"sourceRoot":"src/components"}]}